# Kedro Parameters Definition
# conf/base/parameters.yml

# ============================================================
# GitHub Parameters (flat keys for explicit param references)
# ============================================================

github_url: ""  # GitHub URL (format: https://github.com/{owner}/{repo}/tree/{branch}/{path})
github_clone_dir: ""  # Target directory for git clone (empty = use system temp)

# ============================================================
# Ollama Parameters (per-function configuration)
# ============================================================

ollama:
  # Default settings applied to all functions
  defaults:
    model: "gpt-oss:20b"
    base_url: "http://localhost:11434"
    timeout: 120
    warmup_timeout: 120  # Model warmup timeout (seconds)
    temperature: 0.2
    num_predict: -1  # -1 = unlimited

  # Per-function overrides (all fields optional)
  functions:
    # Knowledge extraction: long output (detailed markdown)
    extract_knowledge:
      num_predict: 16384
      timeout: 300

    # Summary translation: medium output
    translate_summary:
      num_predict: 1024

    # Topic extraction: very short output (1-3 words)
    extract_topic:
      model: "gpt-oss:20b"
      num_predict: 64
      timeout: 30

    # Topic and genre extraction: short JSON output
    extract_topic_and_genre:
      num_predict: 256
      timeout: 120

# ============================================================
# Import Parameters
# ============================================================

import:
  # Provider selection (overridden via CLI: --params import.provider=openai)
  provider: claude  # claude | openai | github

  # Processing limits
  limit: 0  # 0 = no limit
  min_messages: 3  # Minimum messages to process a conversation

  # Chunking
  chunk_size: 25000  # Characters before splitting into chunks
  chunk_enabled: false # FIXME: 会話の途中でぶった切ってしまうのを防ぐ必要がある

# ============================================================
# Organize Parameters
# ============================================================

# ============================================================
# Organize Parameters
# ============================================================
# IMPORTANT: organize pipelines (organize_preview, organize_to_vault) require
# conf/local/parameters_organize.yml to be configured.
# Setup: cp conf/base/parameters_organize.local.yml.example conf/local/parameters_organize.yml
#
# The organize section is defined in conf/local/parameters_organize.yml
# and includes: vault_base_path, genre_vault_mapping, conflict_handling,
# genre_priority, genre_keywords

# Placeholder for organize pipeline
# This is overridden by conf/local/parameters_organize.yml when present
organize: {}
